<!doctype html>
<html lang="en">

<head>
  <title>quarantineAQI</title>

  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <!-- Custom styling  -->
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/map.css">

  <!-- Mapbox -->
  <link href='https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.css' rel='stylesheet' />
  <script src='https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.js'></script>

  <!-- Jquery -->
  <script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>

  <!-- Timeline -->
  <script type="text/javascript" src="../node_modules/timelinejs-slider/dist/js/timeline.min.js"></script>
  <link type="stylesheet" href="../node_modules/timelinejs-slider/dist/css/timeline.min.css">

  <!-- Highcharts -->
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/modules/series-label.js"></script>
  <script src="https://code.highcharts.com/modules/data.js"></script>

</head>

<body>
  <!-- nav bar -->
  <!-- placeholder to be replaced with top navigation bar -->
  <div class="navPlaceholder">

  </div>

  <!-- jquery to get top navigation bar from navBar.html -->
  <script>
    // gets top navigation bar and places it in topNav
    $.get("pageElements/navBar.html", function (topNav) {
      // replaces navPlaceholder with topNav
      $(".navPlaceholder").replaceWith(topNav);
    });
  </script>
  <!-- end of nav bar -->

  <!-- main content -->

  <div class="container text-center" style="padding: 100px 0px 0px 0px">
    <!-- row containing map titles -->
    <div class="row" style="padding: 20px">
      <div class="col-6" style="padding-right: 20px">
        <h2>Los Angeles, USA</h2>
      </div>
      <div class="col-6" style="padding-left: 20px">
        <h2>London, UK</h2>
      </div>
    </div>
    <!-- row containing maps -->
    <div class="row" style="padding: 0px 0px 25px 0px">

      <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>

      
      <!-- map of LA -->
      <div class="col-6" style="padding-right: 20px" position="start">
        <div id='map1' style='width: 100%; height: 500px;'></div>
        <script>
          mapboxgl.accessToken = 'pk.eyJ1IjoiaGV5aGFpZGVuIiwiYSI6ImNsOWd5d2kzYTJjNm0zd3F0Y3JpYjBzbHkifQ.n54i9juDJo3yjB5iFuHohA';
          const map1 = new mapboxgl.Map({
            container: 'map1', // container ID
            style: 'mapbox://styles/heyhaiden/cl9obhcq600mg15l381brmm4n', // style URL
            center: [-118.24, 34.0522], // starting position [lng, lat]
            zoom: 11, // starting zoom
          });
          map.on('style.load', () => {
            map.setFog({}); // Set the default atmosphere style
          });
        </script>
      </div>
      <!-- map of London -->
      <div class="col-6" style="padding-left: 20px">
        <div id='map2' style='width: 100%; height: 500px;'></div>
        <script>
          mapboxgl.accessToken = 'pk.eyJ1IjoiaGV5aGFpZGVuIiwiYSI6ImNsOWd5d2kzYTJjNm0zd3F0Y3JpYjBzbHkifQ.n54i9juDJo3yjB5iFuHohA';
          const map2 = new mapboxgl.Map({
            container: 'map2', // container ID
            style: 'mapbox://styles/heyhaiden/cl9obhcq600mg15l381brmm4n', // style URL
            center: [-0.1276, 51.5072], // starting position [lng, lat]
            zoom: 11, // starting zoom
          });
          map.on('style.load', () => {
            map.setFog({}); // Set the default atmosphere style
          });
        </script>
      </div>
    </div>
    <!--row containing aqi slider-->
    <div class="row">
      <div class="col">
      <!--container for slider-->
        <div class="slidecontainer">
          <!--title-->
          <h4 style="padding-bottom: 10px">Air Quality Timeline</h4>
          <!--slider-->
          <input type="range" min="0" max="195" value="0" class="slider" id="myRange">
          <!--displys dates from json file based on slider input-->
          <p style="float: left">Date: <span id="dateValue"></span></p>
          <p style="float: right">Air Quality Index Measurements in Parts Per Million (PPM)</p>
        </div>
        <script>
          //empty array to hold dates from json objects in file
          let dates = [];
          //get json file, allocate data to dataLondon
          $.getJSON("../back-end/resources/dataLondon.json", function(dataLondon) {
            //for each object in dataLondon
            $.each(dataLondon, function(k, v){
            // create variable date, set it to the value of each Date key
            let date = v.Date;

            //push date value onto dates array
            dates.push(date);
            //this array now contains all the dates from the json file
          });
          //create variable for slider, allocate to myRange id on page
          let slider = document.getElementById("myRange");
          //create variable for dateText, allocate to dateValue id - this will display the date
          let dateText = document.getElementById("dateValue");
          //change dateText(or dataValue) to the slider value on page load
          dateText.innerHTML = dates[slider.value];
          //change dateText(or dateValue) to the slider value on slider input
          slider.oninput = function() {
            dateText.innerHTML = dates[this.value];
          }
          // use this to log information for debugging
            console.log(dates[195]);
          });
        </script>
      </div>
    </div>
  </div>
</div>

      <!-- Los Angeles AQI graph -->
      


      <!-- London AQI graph -->



      <!-- end of main content-->

      <!-- footer bar -->
      <!-- placeholder to be replaced with footer bar -->
      <div class="footPlaceholder">

      </div>

      <!-- jquery to get footer bar from footerBar.html -->
      <script>
        // gets footer bar and places it in footerBar
        $.get("pageElements/footerBar.html", function (footerBar) {
          // replaces footPlaceholder with footerBar
          $(".footPlaceholder").replaceWith(footerBar);
        });
  </script>
  <!-- end of footer bar -->

  <!-- JS scripts under here -->
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>

</body>

</html>