<!doctype html>
<html lang="en">

<head>
  <title>quarantineAQI - Dashboard</title>

  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <!-- Custom styling  -->
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/map.css">

  <!-- Mapbox -->
  <link href='https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.css' rel='stylesheet' />
  <script src='https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.js'></script>

  <!-- Jquery -->
  <script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>

  <!-- Timeline -->
  <script type="text/javascript" src="../node_modules/timelinejs-slider/dist/js/timeline.min.js"></script>
  <link type="stylesheet" href="../node_modules/timelinejs-slider/dist/css/timeline.min.css">

  <!-- Highchart API -->
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/modules/series-label.js"></script>
  <script src="https://code.highcharts.com/modules/data.js"></script>

</head>

<body>
  <!-- nav bar -->
  <!-- placeholder to be replaced with top navigation bar -->
  <div class="navPlaceholder">

  </div>

  <!-- jquery to get top navigation bar from navBar.html -->
  <script>
    // gets top navigation bar and places it in topNav
    $.get("pageElements/navBar.html", function (topNav) {
      // replaces navPlaceholder with topNav
      $(".navPlaceholder").replaceWith(topNav);
    });
  </script>
  <!-- end of nav bar -->

  <!-- main content -->

  <div class="container text-center" style="padding: 100px 0px 0px 0px">
    <!-- row containing map titles -->
    <div class="row" style="padding: 20px">
      <div class="col-6" style="padding-right: 20px">
        <h2>Los Angeles, USA</h2>
      </div>
      <div class="col-6" style="padding-left: 20px">
        <h2>London, UK</h2>
      </div>
    </div>
    <!-- row containing maps -->
    <div class="row" style="padding: 0px 0px 25px 0px">

      <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>


      <!-- map of LA -->
      <div class="col-6" style="padding-right: 20px" position="start">
        <div id='map1' style='width: 100%; height: 500px;'></div>
        <script>
          mapboxgl.accessToken = 'pk.eyJ1IjoiaGV5aGFpZGVuIiwiYSI6ImNsOWd5d2kzYTJjNm0zd3F0Y3JpYjBzbHkifQ.n54i9juDJo3yjB5iFuHohA';
          const map1 = new mapboxgl.Map({
            container: 'map1', // container ID
            style: 'mapbox://styles/heyhaiden/cl9obhcq600mg15l381brmm4n', // style URL
            center: [-118.24, 34.0522], // starting position [lng, lat]
            zoom: 11, // starting zoom
          });
          map1.on('style.load', () => {
            map.setFog({}); // Set the default atmosphere style
          });
        </script>
      </div>

      <!-- map of London -->
      <div class="col-6" style="padding-left: 20px">
        <div id='map2' style='width: 100%; height: 500px;'></div>
        <script>
          mapboxgl.accessToken = 'pk.eyJ1IjoiaGV5aGFpZGVuIiwiYSI6ImNsOWd5d2kzYTJjNm0zd3F0Y3JpYjBzbHkifQ.n54i9juDJo3yjB5iFuHohA';
          const map2 = new mapboxgl.Map({
            container: 'map2', // container ID
            style: 'mapbox://styles/heyhaiden/cl9obhcq600mg15l381brmm4n', // style URL
            center: [-0.1276, 51.5072], // starting position [lng, lat]
            zoom: 11, // starting zoom
          });
          map2.on('style.load', () => {
            map.setFog({}); // Set the default atmosphere style
          });
        </script>
      </div>
    </div>

    <!--row containing aqi slider-->
    <div class="row">
      <div class="col">
        <!--container for slider-->
        <div class="slidecontainer">
          <!--title-->
          <h4 style="padding-bottom: 10px">Air Quality Timeline</h4>
          <!--slider-->
          <input type="range" min="0" max="195" value="0" class="slider" id="myRange">
          <!--displys dates from json file based on slider input-->
          <p style="float: left">Date: <span id="dateValue"></span></p>
          <p style="float: right">Air Quality Index Measurements in Parts Per Million (PPM)</p>
        </div>
        <script>
          //empty array to hold dates from json objects in file
          let dates = [];
          //get json file, allocate data to dataLondon
          $.getJSON("../back-end/resources/dataLondon.json", function (dataLondon) {
            //for each object in dataLondon
            $.each(dataLondon, function (k, v) {
              // create variable date, set it to the value of each Date key
              let date = v.Date;

              //push date value onto dates array
              dates.push(date);
              //this array now contains all the dates from the json file
            });
            //create variable for slider, allocate to myRange id on page
            let slider = document.getElementById("myRange");
            //create variable for dateText, allocate to dateValue id - this will display the date
            let dateText = document.getElementById("dateValue");
            //change dateText(or dataValue) to the slider value on page load
            dateText.innerHTML = dates[slider.value];
            //change dateText(or dateValue) to the slider value on slider input
            slider.oninput = function () {
              dateText.innerHTML = dates[this.value];
            }
            // use this to log information for debugging
            console.log(dates[195]);
          });
        </script>
      </div>
    </div>
    <!--row containing highchart graph-->
    <div class="row">
      <div class="col">
        <div class="graphContainer">
          <h4 style="padding-bottom: 10px">Air Quality Graph</h4>

          <div id="container"></div>
          <pre id="csv" style="display:none">
            Date,London
            2019-12-30,67
            2019-12-31,70
            2020-01-01,95
            2020-01-02,30
            2020-01-03,30
            2020-01-04,30
            2020-01-05,23
            2020-01-06,30
            2020-01-07,35
            2020-01-08,50
            2020-01-09,25
            2020-01-10,33
            2020-01-11,28
            2020-01-12,21
            2020-01-13,21
            2020-01-14,25
            2020-01-15,28
            2020-01-16,29
            2020-01-17,25
            2020-01-18,38
            2020-01-19,46
            2020-01-20,78
            2020-01-21,86
            2020-01-22,83
            2020-01-23,59
            2020-01-24,58
            2020-01-25,70
            2020-01-26,52
            2020-01-27,21
            2020-01-28,21
            2020-01-29,33
            2020-01-30,25
            2020-01-31,18
            2020-02-01,31
            2020-02-02,38
            2020-02-03,35
            2020-02-04,30
            2020-02-05,59
            2020-02-06,65
            2020-02-07,69
            2020-02-08,34
            2020-02-09,25
            2020-02-10,26
            2020-02-11,28
            2020-02-12,24
            2020-02-13,25
            2020-02-14,41
            2020-02-15,20
            2020-02-16,16
            2020-02-17,30
            2020-02-18,25
            2020-02-19,30
            2020-02-20,18
            2020-02-21,31
            2020-02-22,38
            2020-02-23,20
            2020-02-24,18
            2020-02-25,17
            2020-02-26,21
            2020-02-27,25
            2020-02-28,25
            2020-02-29,29
            2020-03-01,23
            2020-03-02,21
            2020-03-03,41
            2020-03-04,38
            2020-03-05,38
            2020-03-06,39
            2020-03-07,48
            2020-03-08,25
            2020-03-09,25
            2020-03-10,15
            2020-03-11,18
            2020-03-12,26
            2020-03-13,31
            2020-03-14,25
            2020-03-15,22
            2020-03-16,35
            2020-03-17,30
            2020-03-18,32
            2020-03-19,42
            2020-03-20,25
            2020-03-21,29
            2020-03-22,40
            2020-03-23,48
            2020-03-24,51
            2020-03-25,65
            2020-03-26,79
            2020-03-27,78
            2020-03-28,46
            2020-03-29,24
            2020-03-30,23
            2020-03-30,23
            2020-03-31,30
            2020-03-31,30
            2020-04-01,36
            2020-04-01,36
            2020-04-02,25
            2020-04-02,25
            2020-04-03,31
            2020-04-03,31
            2020-04-04,46
            2020-04-04,46
            2020-04-05,40
            2020-04-05,40
            2020-04-06,32
            2020-04-07,50
            2020-04-08,93
            2020-04-09,93
            2020-04-10,88
            2020-04-11,69
            2020-04-12,61
            2020-04-13,33
            2020-04-14,31
            2020-04-15,59
            2020-04-16,97
            2020-04-17,38
            2020-04-18,52
            2020-04-19,41
            2020-04-20,41
            2020-04-21,44
            2020-04-22,54
            2020-04-23,63
            2020-04-24,62
            2020-04-25,45
            2020-04-26,50
            2020-04-27,57
            2020-04-28,25
            2020-04-29,29
            2020-04-30,22
            2020-05-01,24
            2020-05-02,23
            2020-05-03,35
            2020-05-04,38
            2020-05-05,25
            2020-05-06,44
            2020-05-07,56
            2020-05-08,57
            2020-05-09,72
            2020-05-10,52
            2020-05-11,21
            2020-05-12,26
            2020-05-13,25
            2020-05-14,22
            2020-05-15,36
            2020-05-16,30
            2020-05-17,34
            2020-05-18,30
            2020-05-19,30
            2020-05-20,36
            2020-05-21,41
            2020-05-22,41
            2020-05-23,34
            2020-05-24,38
            2020-05-25,46
            2020-05-26,40
            2020-05-27,38
            2020-05-28,30
            2020-05-29,33
            2020-05-30,40
            2020-05-31,34
            2020-06-01,34
            2020-06-02,35
            2020-06-03,45
            2020-06-04,23
            2020-06-05,20
            2020-06-06,23
            2020-06-07,26
            2020-06-08,30
            2020-06-09,34
            2020-06-10,42
            2020-06-11,40
            2020-06-12,61
            2020-06-13,33
            2020-06-14,28
            2020-06-15,31
            2020-06-16,30
            2020-06-17,38
            2020-06-18,26
            2020-06-19,29
            2020-06-20,25
            2020-06-21,25
            2020-06-22,34
            2020-06-23,40
            2020-06-24,56
            2020-06-25,57
            2020-06-26,53
            2020-06-27,25
            2020-06-28,21
            2020-06-29,23
            2020-06-30,21
            2020-07-01,21
            2020-07-02,24
            2020-07-03,26
            2020-07-04,22
            2020-07-05,23
            </pre>
            
            <script  src="js/highchart.js"></script>
          
        </div>
      </div>
    </div>
  </div>



  <!-- end of main content-->

  <!-- footer bar -->
  <!-- placeholder to be replaced with footer bar -->
  <div class="footPlaceholder">

  </div>

  <!-- jquery to get footer bar from footerBar.html -->
  <script>
    // gets footer bar and places it in footerBar
    $.get("pageElements/footerBar.html", function (footerBar) {
      // replaces footPlaceholder with footerBar
      $(".footPlaceholder").replaceWith(footerBar);
    });
  </script>
  <!-- end of footer bar -->

  <!-- JS scripts under here -->
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>

</body>

</html>